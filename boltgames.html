<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Open Network | Болтопедия</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base fonts */
        body, p, div, span, a, li, td {
            font-family: 'JetBrains Mono', monospace;
        }

        h1, h2, h3, h4, .article-title h1 {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        /* Navigation styling */
        .nav-links {
            display: flex;
            gap: 12px;
            padding: 8px 0;
        }

        .nav-links a {
            display: inline-block;
            padding: 8px 16px;
            color: #333;
            text-decoration: none;
            position: relative;
            transition: all 0.2s ease;
            border: none;
            background: none;
        }

        /* Hand-drawn border effect */
        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px solid #333;
            border-radius: 0;
            transform: skew(-1deg) rotate(0.5deg);
            transition: all 0.2s ease;
        }

        /* "Nail" effect in corners */
        .nav-links a::after {
            content: '•';
            position: absolute;
            font-size: 8px;
            color: #333;
            top: 4px;
            left: 4px;
        }

        .nav-links a:hover {
            color: #000;
            transform: translateY(-1px);
        }

        .nav-links a:hover::before {
            transform: skew(1deg) rotate(-0.5deg);
            border-color: #000;
        }

        /* Left sidebar specific */
        .left-sidebar .nav-links {
            flex-direction: column;
        }

        .left-sidebar .nav-links a {
            margin: 4px 0;
            width: fit-content;
        }

        /* Special elements */
        .infobox, .toc {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        .code-block, code {
            font-family: 'JetBrains Mono', monospace;
            background: #f0f0f0;
            padding: 2px 5px;
            border-radius: 3px;
        }

        /* Heading effects */
        h1, h2, h3 {
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
        }

        /* Table styles */
        table {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        body {
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f6f6f6;
            color: #202122;
            overflow-y: auto;
        }

        .article-title h1 {
            font-size: 3.2em;
            margin-bottom: 0.3em;
        }

        h2 {
            font-size: 2.4em;
            margin-top: 1.5em;
        }

        h3 {
            font-size: 2em;
            color: #2c3e50;
        }

        .hatnote {
            font-style: italic;
        }

        .top-bar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: #f8f9fa;
            border-bottom: 1px solid #a7d7f9;
            padding: 10px 0;
            font-size: 0.85em;
        }

        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 160px 1fr;
            gap: 20px;
        }

        .left-sidebar {
            padding: 20px;
        }

        .main-content {
            background: white;
            padding: 25px;
            border: 1px solid #a7d7f9;
            border-radius: 2px;
        }

        .article-title {
            border-bottom: 1px solid #a2a9b1;
            margin-bottom: 0.5em;
        }

        .infobox {
            float: right;
            margin: 0.5em 0 1em 1em;
            border: 1px solid #a2a9b1;
            padding: 0.2em;
            background-color: #f8f9fa;
            width: 22em;
        }

        .infobox-title {
            text-align: center;
            font-size: 1.25em;
            font-weight: bold;
            background-color: #eaecf0;
            padding: 0.2em;
        }

        .infobox img {
            width: 100%;
            height: auto;
        }

        .toc {
            border: 1px solid #a2a9b1;
            background-color: #f8f9fa;
            padding: 10px;
            display: inline-block;
            margin: 1em 0;
        }

        .reference {
            font-size: 0.8em;
            vertical-align: super;
            color: #0645ad;
        }

        .edit-section {
            font-size: 0.8em;
            margin-left: 1em;
            color: #0645ad;
        }

        blockquote {
            margin: 1em 0;
            padding-left: 1em;
            border-left: 3px solid #c8ccd1;
            color: #54595d;
        }

        .bolt-category {
            color: #ba0000;
            font-weight: bold;
        }

        @keyframes helicopter {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(2160deg);
            }
        }
        
        .bolt-logo img {
            width: 100px;
            height: 100px;
            cursor: pointer;
            transform-origin: center;
        }
        
        .spinning {
            animation: helicopter 1.5s cubic-bezier(0.3, 0, 0.7, 1) forwards;
        }

        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            transform: scale(0.9);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        .back-to-top img {
            width: 40px;
            height: 40px;
            filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.2));
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .back-to-top:hover img {
            transform: translateY(-5px) rotate(-10deg);
        }

        .top-bolt-row {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            height: 60px;
            width: 100%;
        }

        .bolt-scroll {
            display: flex;
            gap: 20px;
            justify-content: center;
            width: auto;
            animation: none;
            position: static;
        }

        .top-bolt-row img {
            width: 50px;
            height: 50px;
        }

        .hammered-in {
            transform: translateY(20px);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .pulled-out {
            transform: translateY(0);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .game-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px solid #333;
            transform: skew(-1deg) rotate(0.5deg);
        }
        
        .game-button:hover {
            transform: translateY(-2px);
        }

        @keyframes scoreFloat {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; transform: translateX(-50%) scale(1.2); }
            100% { opacity: 0; transform: translateX(-50%) scale(1); }
        }

        @keyframes explode {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="content-wrapper">
            <div></div>
            <div class="top-bolt-row">
                <div class="bolt-scroll">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                </div>
            </div>
        </div>
    </div>

    <div class="content-wrapper">
        <div class="left-sidebar">
            
            <div class="bolt-logo">
                <img src="about-2.png" alt="Болтопедия Logo" class="floating-bolt">
            </div>
            <div class="wiki-header" >BOLTopedia</div>
            <nav class="nav-links">
                <a href="index.html">BOLT</a>
                <a href="introduction.html">КАБАН</a>
                <a href="dedust.html">DeDust</a>
                <a href="ton.html">TON</a>
                <a href="boltgames.html">GAMES</a>
            </nav>
        </div>

        <div class="main-content">
            <div class="article-title">
                <h1>BOLT Games</h1>
            </div>
            
            <div class="hatnote">
                Для лудоманов =)
            </div>

            <div class="toc">
                <h2>Содержание</h2>
                <ol>
                    <li><a href="#zabei-bolt">Забей болт</a></li>
                    <li><a href="#flappy-bolt">Flappy Bolt</a></li>
                    <li><a href="#find-bolt">Найди болт</a></li>
                        </ol>
            </div>

            <h2 id="zabei-bolt">Забей болт</h2>
            <div class="game-container" style="text-align: center; margin: 40px 0; padding: 20px; background: #f8f9fa; border: 1px solid #a2a9b1; border-radius: 8px;">
                <div id="game-start" style="margin-bottom: 20px;">
                    <button id="start-game" class="game-button" style="padding: 12px 24px; font-size: 18px; font-family: 'JetBrains Mono', monospace; cursor: pointer; background: #fff; border: 2px solid #333; position: relative;">
                        Забить болт
                    </button>
                </div>
               
                <div id="game-area" style="display: none;">
                    <div class="bolt-counter" style="font-size: 24px; margin-bottom: 20px;">
                        Болт забит: <span id="bolt-count">0</span> раз
            </div>
                 <!-- place a spacer here -->
                 <div style="height: 33px;"></div>
                    <div class="game-bolt-row" style="display: flex; justify-content: center; align-items: center; position: relative; height: 100px;">
                        <div style="position: relative; width: 200px; height: 100px;">
                            
                            <div class="game-bolt" style="cursor: pointer; position: absolute; top: 0%; left: 50%; transform: translate(-50%, -50%);">
                               
                                <img src="about-2.png" alt="Game Bolt" 
                                style="width: 80px; height: 80px; position: relative; z-index: 1;">
            </div>
                            <img src="majestic-tree-stump-natures-timeless-beauty.png" alt="Tree Stump" 
                                style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 17.5px; left: 0;">
        </div>
    </div>
        </div>
    </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const startButton = document.getElementById('start-game');
                    const gameArea = document.getElementById('game-area');
                    const gameBolt = document.querySelector('.game-bolt img');
                    const boltCounter = document.getElementById('bolt-count');
                    let count = 0;

                    startButton.addEventListener('click', function() {
                        startButton.parentElement.style.display = 'none';
                        gameArea.style.display = 'block';
                    });

                    gameBolt.addEventListener('click', function() {
                        if (!this.classList.contains('hammered-in')) {
                            // Hammer down
                            this.classList.remove('pulled-out');
                            this.style.animation = 'hammerIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards';
                            count++;
                            boltCounter.textContent = count;

                            // Add shake effect
                            const gameContainer = document.querySelector('.game-bolt-row');
                            gameContainer.style.transform = 'translateX(1px)';
                            setTimeout(() => {
                                gameContainer.style.transform = 'translateX(-1px)';
                                setTimeout(() => {
                                    gameContainer.style.transform = 'translateX(0)';
                                }, 50);
                            }, 50);
                        } else {
                            // Pull up with the complex animation
                            this.style.animation = 'pullOut 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards';
                        }
                        this.classList.toggle('hammered-in');
                    });
                });
            </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const bolt = document.querySelector('.bolt-logo img');
            
            // Initial animation on page load
            bolt.classList.add('spinning');
            
            // Click handler
            bolt.addEventListener('click', () => {
                if (!bolt.classList.contains('spinning')) {
                    bolt.classList.add('spinning');
                    
                    bolt.addEventListener('animationend', function handler() {
                        bolt.classList.remove('spinning');
                        bolt.removeEventListener('animationend', handler);
                    });
                }
            });
            
            // Remove initial animation class after it completes
            bolt.addEventListener('animationend', function handler() {
                bolt.classList.remove('spinning');
                bolt.removeEventListener('animationend', handler);
            });
        });

        // Back to top functionality
        const backToTop = document.querySelector('.back-to-top');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });
        
        backToTop.addEventListener('click', (e) => {
            e.preventDefault();
            const scrollDuration = 500; // Faster duration (500ms instead of 800ms)
            const scrollStep = -window.scrollY / (scrollDuration / 15);
            
            const scrollInterval = setInterval(() => {
                if (window.scrollY !== 0) {
                    window.scrollBy(0, scrollStep);
                } else {
                    clearInterval(scrollInterval);
                }
            }, 15);
        });

        // Updated smooth scroll functionality
        document.querySelectorAll('.toc a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    const headerOffset = 70; // Height of sticky header
                    const elementPosition = window.pageYOffset + targetElement.getBoundingClientRect().top - headerOffset;
                    const scrollDuration = 500;
                    const scrollStep = (elementPosition - window.pageYOffset) / (scrollDuration / 15);
                    
                    const scrollInterval = setInterval(() => {
                        if (Math.abs(elementPosition - window.pageYOffset) > Math.abs(scrollStep)) {
                            window.scrollBy(0, scrollStep);
                        } else {
                            window.scrollTo(0, elementPosition);
                            clearInterval(scrollInterval);
                        }
                    }, 15);
                }
            });
        });
    </script>
    <script>
       document.addEventListener('DOMContentLoaded', function() {
    const bolts = document.querySelectorAll('.bolt-scroll img');
    
    // Initial state - all bolts at top
    bolts.forEach(bolt => {
        bolt.style.transform = 'translateY(0)';
    });

    // Click handler for each bolt
    bolts.forEach(bolt => {
        bolt.addEventListener('click', function() {
            if (!this.classList.contains('hammered-in')) {
                // Hammer down
                this.classList.remove('pulled-out');
                this.classList.add('hammered-in');
                
                // Add shake effect to simulate impact
                setTimeout(() => {
                    const row = document.querySelector('.top-bolt-row');
                    row.style.transform = 'translateX(1px)';
                    setTimeout(() => {
                        row.style.transform = 'translateX(-1px)';
                        setTimeout(() => {
                            row.style.transform = 'translateX(0)';
                        }, 50);
                    }, 50);
                }, 300);
            } else {
                // Pull up
                this.classList.remove('hammered-in');
                this.classList.add('pulled-out');
            }
        });
    });
});
</script>

            <h2 id="flappy-bolt">Flappy Bolt</h2>
            <div class="game-container" style="text-align: center; margin: 40px 0; padding: 20px; background: #f8f9fa; border: 1px solid #a2a9b1; border-radius: 8px;">
                <div id="flappy-start" style="margin-bottom: 20px;">
                    <button id="start-flappy" class="game-button" style="padding: 12px 24px; font-size: 18px; font-family: 'JetBrains Mono', monospace; cursor: pointer; background: #fff; border: 2px solid #333; position: relative;">
                        Попрыгать
                    </button>
                </div>
                
                <div id="flappy-game" style="display: none;">
                    <div class="score-counter" style="font-size: 24px; margin-bottom: 20px;">
                        <div style="margin-bottom: 8px;">Счёт: <span id="flappy-score">0</span></div>
                        <div style="font-size: 18px; color: #666;">Лучший результат: <span id="best-score">0</span></div>
                    </div>
                    <div id="start-prompt" style="position: sticky;"; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                        font-size: 24px; color: #333; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 8px;">
                        Нажмите что угодно, чтобы начать
                    </div>
                    <canvas id="gameCanvas" width="640" height="480" style="border: 2px solid #333; background: #f0f0f0;"></canvas>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const canvas = document.getElementById('gameCanvas');
                    const ctx = canvas.getContext('2d');
                    const startButton = document.getElementById('start-flappy');
                    const gameArea = document.getElementById('flappy-game');
                    const scoreElement = document.getElementById('flappy-score');
                    const startPrompt = document.getElementById('start-prompt');
                    
                    // Add best score tracking
                    let bestScore = 0;  // Reset best score on page reload
                    const bestScoreElement = document.getElementById('best-score');
                    
                    let boltImg = new Image();
                    boltImg.src = 'about-2.png';
                    
                    let score = 0;
                    let combo = 0;
                    let comboTimer;
                    let boltY = canvas.height / 2;
                    let boltVelocity = 0;
                    let gravity = 0.5;
                    let jumpStrength = -7;
                    let gameStarted = false;
                    let pipes = [];
                    let gameLoop;
                    let isGameOver = false;
                    let boltRotation = 0;
                    let gameSpeed = 2;
                    let speedIncreaseInterval;

                    const bolt = {
                        x: 50,
                        width: 60,
                        height: 60,
                        rotation: 0,
                        targetRotation: 0
                    };

                    function updateBoltRotation() {
                        // Smooth rotation animation
                        bolt.targetRotation = Math.min(Math.PI/3, Math.max(-Math.PI/6, boltVelocity * 0.15));
                        bolt.rotation += (bolt.targetRotation - bolt.rotation) * 0.1;
                    }

                    function drawBolt() {
                        ctx.save();
                        ctx.translate(bolt.x + bolt.width/2, boltY + bolt.height/2);
                        ctx.rotate(bolt.rotation);
                        // Add subtle hovering animation
                        const hoverOffset = Math.sin(Date.now() * 0.003) * 2;
                        ctx.translate(0, hoverOffset);
                        ctx.drawImage(boltImg, -bolt.width/2, -bolt.height/2, bolt.width, bolt.height);
                        ctx.restore();
                    }

                    function drawPipes() {
                        pipes.forEach(pipe => {
                            // Ensure color is set before drawing
                            ctx.fillStyle = pipe.color || '#2ecc71';
                            // Draw top pipe
                            ctx.fillRect(pipe.x, 0, pipe.width, pipe.topHeight);
                            // Draw bottom pipe with same color
                            ctx.fillRect(pipe.x, pipe.topHeight + pipe.gap, pipe.width, 
                                canvas.height - (pipe.topHeight + pipe.gap));
                        });
                    }

                    function updateGame() {
                        if (isGameOver) return;

                        boltVelocity += gravity;
                        boltY += boltVelocity;
                        updateBoltRotation();

                        // Move pipes
                        pipes.forEach(pipe => {
                            pipe.x -= gameSpeed;
                            // Score when bolt passes middle of pipe
                            if (!pipe.passed && pipe.x + pipe.width/2 < bolt.x) {
                                pipe.passed = true;
                                combo++;
                                const comboPoints = Math.floor(combo/5);  // Extra point every 5 consecutive pipes
                                score += (1 + comboPoints);
                                scoreElement.textContent = score;
                                
                                // Visual score popup
                                const scorePopup = document.createElement('div');
                                scorePopup.textContent = comboPoints > 0 ? `+${1 + comboPoints}` : '+1';
                                scorePopup.style.cssText = `
                                    position: absolute;
                                    left: ${canvas.offsetLeft + bolt.x + 30}px;
                                    top: ${canvas.offsetTop + boltY}px;
                                    color: ${comboPoints > 0 ? '#ff9900' : '#16c784'};
                                    font-size: 24px;
                                    font-weight: bold;
                                    pointer-events: none;
                                    animation: scoreFloat 1s ease-out forwards;
                                    z-index: 1000;
                                `;
                                gameArea.appendChild(scorePopup);
                                setTimeout(() => scorePopup.remove(), 1000);

                                // Reset combo timer
                                clearTimeout(comboTimer);
                                comboTimer = setTimeout(() => combo = 0, 2000);

                                // Show combo text if applicable
                                if (combo >= 5) {
                                    const comboText = document.createElement('div');
                                    comboText.textContent = `КОМБО x${combo}!`;
                                    comboText.style.cssText = `
                                        position: absolute;
                                        left: 50%;
                                        top: ${canvas.offsetTop + 20}px;
                                        transform: translateX(-50%);
                                        color: #ff9900;
                                        font-size: 28px;
                                        font-weight: bold;
                                        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                                        pointer-events: none;
                                        animation: fadeOut 1s forwards;
                                        z-index: 1000;
                                    `;
                                    gameArea.appendChild(comboText);
                                    setTimeout(() => comboText.remove(), 1000);
                                }
                            }
                        });

                        // Remove off-screen pipes
                        if (pipes.length && pipes[0].x < -pipes[0].width) {
                            pipes.shift();
                        }

                        // Add new pipes
                        if (!pipes.length || pipes[pipes.length - 1].x < canvas.width - 250) {
                            const newPipe = createPipe();
                            newPipe.passed = false;  // Add passed flag
                            pipes.push(newPipe);
                        }

                        // Check collisions
                        if (boltY < 0 || boltY + bolt.height > canvas.height) {
                            gameOver();
                        }

                        pipes.forEach(pipe => {
                            if (bolt.x + bolt.width > pipe.x && bolt.x < pipe.x + pipe.width) {
                                if (boltY < pipe.topHeight || boltY + bolt.height > pipe.topHeight + pipe.gap) {
                                    gameOver();
                                }
                            }
                        });

                        // Draw everything
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        drawPipes();
                        drawBolt();
                    }

                    function gameOver() {
                        isGameOver = true;
                        gameStarted = false;
                        clearInterval(gameLoop);
                        // Screen shake effect
                        canvas.style.animation = 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both';
                        setTimeout(() => canvas.style.animation = '', 500);
                        // Update best score
                        if (score > bestScore) {
                            bestScore = score;
                            localStorage.setItem('flappyBoltBestScore', bestScore);
                            bestScoreElement.textContent = bestScore;
                        }
                        startButton.style.display = 'block';
                        startButton.textContent = 'Играть снова';
                        startPrompt.style.display = 'block';
                        startPrompt.innerHTML = 'Не повезло! Попробуй еще.';
                    }

                    function startGame() {
                        if (!gameStarted) {
                            gameStarted = true;
                            gameSpeed = 2;
                            startPrompt.style.display = 'none';
                            startPrompt.innerHTML = 'Нажмите что угодно, чтобы начать';
                            isGameOver = false;
                            boltY = canvas.height / 2;
                            boltVelocity = 0;
                            bolt.rotation = 0;
                            bolt.targetRotation = 0;
                            pipes = [];
                            score = 0;
                            combo = 0;
                            comboTimer = null;
                            scoreElement.textContent = score;
                            startButton.style.display = 'none';
                            gameArea.style.display = 'block';
                            
                            if (gameLoop) clearInterval(gameLoop);
                            gameLoop = setInterval(updateGame, 1000/60);
                            // Increase speed every 10 seconds
                            speedIncreaseInterval = setInterval(() => {
                                if (gameSpeed < 4) {  // Max speed cap
                                    gameSpeed += 0.2;
                                }
                            }, 10000);
                        }
                    }

                    function createPipe() {
                        const gap = 160;
                        const minHeight = 50;
                        const maxHeight = canvas.height - gap - minHeight;
                        const height = Math.random() * (maxHeight - minHeight) + minHeight;
                        
                        // Get previous pipe height for comparison
                        const gapCenter = height + (gap / 2);
                        const previousGapCenter = pipes.length > 0 ? 
                            pipes[pipes.length - 1].topHeight + (gap / 2) : gapCenter;
                        
                        // Compare gap positions - positive means gap is higher (like price going up)
                        const heightDifference = gapCenter - previousGapCenter;
                        
                        // Determine color based on height difference
                        let color;
                        if (heightDifference > 20) {  // Gap is higher - like price going up
                            color = '#ea3943'; // Red for upward movement
                        } else if (heightDifference < -20) {  // Gap is lower - like price going down
                            color = '#16c784'; // Pump (green)
                        } else {
                            color = '#2ecc71'; // Neutral (default green)
                        }
                        
                        return {
                            x: canvas.width,
                            width: 70,
                            topHeight: height,
                            gap: gap,
                            color: color
                        };
                    }

                    startButton.addEventListener('click', function() {
                        gameArea.style.display = 'block';
                        startPrompt.style.display = 'block';
                        this.style.display = 'none';
                        // Initialize game view without starting
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        drawBolt();
                    });

                    canvas.addEventListener('click', function() {
                        if (!gameStarted) {
                            startGame();
                        } else if (!isGameOver) {
                            boltVelocity = jumpStrength;
                        }
                    });

                    // Add keyboard controls
                    document.addEventListener('keydown', function(e) {
                        if (!gameStarted) {
                            startGame();
                        } else if (!isGameOver) {
                            boltVelocity = jumpStrength;
                        }
                    });
                });
            </script>

            <h2 id="find-bolt">Найди болт</h2>
            <div class="game-container" style="text-align: center; margin: 40px 0; padding: 20px; background: #f8f9fa; border: 1px solid #a2a9b1; border-radius: 8px;">
                <div id="find-bolt-start" style="margin-bottom: 20px;">
                    <button id="start-find-bolt" class="game-button" style="padding: 12px 24px; font-size: 18px; font-family: 'JetBrains Mono', monospace; cursor: pointer; background: #fff; border: 2px solid #333; position: relative;">
                        Начать поиск
                    </button>
                </div>
                
                <div id="find-bolt-game" style="display: none;">
                    <div class="game-stats" style="font-size: 20px; margin-bottom: 20px; color: #666;">
                        <div>Попыток: <span id="attempts">0</span></div>
                        <div>Всего найдено: <span id="total-bolts">0</span> болтов</div>
                    </div>
                    
                    <div id="find-bolt-grid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 8px; max-width: 500px; margin: 0 auto;">
                    </div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const startButton = document.getElementById('start-find-bolt');
                    const gameArea = document.getElementById('find-bolt-game');
                    const gridContainer = document.getElementById('find-bolt-grid');
                    const attemptsDisplay = document.getElementById('attempts');
                    const totalBoltsDisplay = document.getElementById('total-bolts');
                    
                    let attempts = 0;
                    let totalBoltsFound = 0;
                    let boltPositions = [];
                    let foundBolts = 0;
                    let gridSize = 48;
                    let isGameActive = false;

                    function createCell() {
                        const cell = document.createElement('div');
                        cell.style.cssText = `
                            aspect-ratio: 1;
                            background: #fff;
                            border: 2px solid #333;
                            cursor: pointer;
                            transition: all 0.2s ease;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            position: relative;
                            overflow: hidden;
                            font-size: 14px;
                            color: #999;
                        `;
                        return cell;
                    }

                    function getDirectionalHint(index) {
                        const row = Math.floor(index / 8);
                        const col = index % 8;
                        let nearestBolt = null;
                        let minDistance = Infinity;
                        
                        boltPositions.forEach(pos => {
                            const boltRow = Math.floor(pos / 8);
                            const boltCol = pos % 8;
                            const distance = Math.abs(row - boltRow) + Math.abs(col - boltCol);
                            if (distance < minDistance) {
                                minDistance = distance;
                                nearestBolt = { row: boltRow, col: boltCol };
                            }
                        });

                        // Return a color based on distance
                        if (minDistance <= 1) return null;
                        const maxDistance = Math.sqrt(Math.pow(8, 2) + Math.pow(6, 2)); // Max possible distance
                        const intensity = 1 - (minDistance / maxDistance);
                        return `rgba(${Math.round(255 * (1 - intensity))}, 0, ${Math.round(255 * intensity)}, 0.3)`;
                    }

                    function createExplosion(cell) {
                        const explosion = document.createElement('div');
                        explosion.style.cssText = `
                            position: absolute;
                            width: 100%;
                            height: 100%;
                            animation: explode 0.5s cubic-bezier(.36,.07,.19,.97) both;
                            background: radial-gradient(circle at center, 
                                rgba(255,68,68,0.9) 0%,
                                rgba(255,68,68,0.6) 30%,
                                transparent 70%
                            );
                            pointer-events: none;
                            top: 0;
                            left: 0;
                            z-index: 10;
                        `;
                        cell.appendChild(explosion);
                        explosion.addEventListener('animationend', () => explosion.remove());
                    }

                    function createGrid() {
                        gridContainer.innerHTML = '';
                        boltPositions = [];
                        foundBolts = 0;
                        
                        // Place 3 bolts randomly
                        while (boltPositions.length < 3) {
                            const pos = Math.floor(Math.random() * gridSize);
                            if (!boltPositions.includes(pos)) {
                                boltPositions.push(pos);
                            }
                        }
                        
                        // Update or create counter
                        let counterDisplay = document.getElementById('bolt-counter');
                        if (!counterDisplay) {
                            counterDisplay = document.createElement('div');
                            counterDisplay.id = 'bolt-counter';
                            counterDisplay.style.fontSize = '20px';
                            counterDisplay.style.marginBottom = '15px';
                            gridContainer.parentElement.insertBefore(counterDisplay, gridContainer);
                        }
                        counterDisplay.textContent = `Найдено: ${foundBolts} из 3 болтов`;
                        
                        gridContainer.style.gridTemplateColumns = 'repeat(8, 1fr)';
                        
                        for (let i = 0; i < gridSize; i++) {
                            const cell = createCell();
                            
                            cell.addEventListener('click', () => checkCell(cell, i));
                            cell.addEventListener('mouseover', () => {
                                if (!cell.classList.contains('revealed')) {
                                    cell.style.transform = 'scale(1.05)';
                                    cell.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                                }
                            });
                            cell.addEventListener('mouseout', () => {
                                cell.style.transform = 'scale(1)';
                                cell.style.boxShadow = 'none';
                            });
                            
                            gridContainer.appendChild(cell);
                        }
                    }

                    function checkCell(cell, index) {
                        if (!isGameActive || cell.classList.contains('revealed')) return;
                        
                        cell.classList.add('revealed');
                        attempts++;
                        attemptsDisplay.textContent = attempts;
                        
                        if (boltPositions.includes(index)) {
                            // Found a bolt!
                            const boltImg = document.createElement('img');
                            boltImg.src = 'about-2.png';
                            boltImg.style.width = '80%';
                            boltImg.style.height = '80%';
                            cell.appendChild(boltImg);
                            cell.style.background = '#16c784';
                            
                            foundBolts++;
                            totalBoltsFound++;
                            totalBoltsDisplay.textContent = totalBoltsFound;
                            document.getElementById('bolt-counter').textContent = 
                                `Найдено: ${foundBolts} из 3 болтов`;
                            
                            if (foundBolts === 3) {
                                // Show completion message
                                const message = document.createElement('div');
                                message.textContent = `Отлично! Все болты найдены за ${attempts} попыток`;
                                message.style.cssText = `
                                    position: absolute;
                                    top: 50%;
                                    left: 50%;
                                    transform: translate(-50%, -50%);
                                    background: rgba(255,255,255,0.9);
                                    padding: 20px;
                                    border-radius: 8px;
                                    font-size: 20px;
                                    color: #16c784;
                                    z-index: 100;
                                `;
                                gridContainer.appendChild(message);
                                setTimeout(() => {
                                    message.remove();
                                    if (isGameActive) createGrid();
                                }, 1000);
                            }
                        } else {
                            // Wrong choice
                            cell.style.background = '#ea3943';
                            createExplosion(cell);
                            
                            // Apply color hint
                            const hintColor = getDirectionalHint(index);
                            if (hintColor) {
                                cell.style.backgroundColor = hintColor;
                            }
                        }
                    }

                    function revealAll() {
                        const cells = gridContainer.children;
                        for (let i = 0; i < cells.length; i++) {
                            if (boltPositions.includes(i)) {
                                const boltImg = document.createElement('img');
                                boltImg.src = 'about-2.png';
                                boltImg.style.width = '80%';
                                boltImg.style.height = '80%';
                                cells[i].appendChild(boltImg);
                                cells[i].style.background = '#16c784';
                            }
                            cells[i].classList.add('revealed');
                        }
                    }

                    startButton.addEventListener('click', function() {
                        attempts = 0;
                        attemptsDisplay.textContent = attempts;
                        isGameActive = true;
                        this.style.display = 'none';
                        gameArea.style.display = 'block';
                        createGrid();
                    });
                });
            </script>
        </div>
    </div>
</body>
</html> 