<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Open Network | Болтопедия</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base fonts */
        body, p, div, span, a, li, td {
            font-family: 'JetBrains Mono', monospace;
        }

        h1, h2, h3, h4, .article-title h1 {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        /* Navigation styling */
        .nav-links {
            display: flex;
            gap: 12px;
            padding: 8px 0;
        }

        .nav-links a {
            display: inline-block;
            padding: 8px 16px;
            color: #333;
            text-decoration: none;
            position: relative;
            transition: all 0.2s ease;
            border: none;
            background: none;
        }

        /* Hand-drawn border effect */
        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px solid #333;
            border-radius: 0;
            transform: skew(-1deg) rotate(0.5deg);
            transition: all 0.2s ease;
        }

        /* "Nail" effect in corners */
        .nav-links a::after {
            content: '•';
            position: absolute;
            font-size: 8px;
            color: #333;
            top: 4px;
            left: 4px;
        }

        .nav-links a:hover {
            color: #000;
            transform: translateY(-1px);
        }

        .nav-links a:hover::before {
            transform: skew(1deg) rotate(-0.5deg);
            border-color: #000;
        }

        /* Left sidebar specific */
        .left-sidebar .nav-links {
            flex-direction: column;
        }

        .left-sidebar .nav-links a {
            margin: 4px 0;
            width: fit-content;
        }

        /* Special elements */
        .infobox, .toc {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        .code-block, code {
            font-family: 'JetBrains Mono', monospace;
            background: #f0f0f0;
            padding: 2px 5px;
            border-radius: 3px;
        }

        /* Heading effects */
        h1, h2, h3 {
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
        }

        /* Table styles */
        table {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
        }

        body {
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f6f6f6;
            color: #202122;
            overflow-y: auto;
        }

        .article-title h1 {
            font-size: 3.2em;
            margin-bottom: 0.3em;
        }

        h2 {
            font-size: 2.4em;
            margin-top: 1.5em;
        }

        h3 {
            font-size: 2em;
            color: #2c3e50;
        }

        .hatnote {
            font-style: italic;
        }

        .top-bar {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: #f8f9fa;
            border-bottom: 1px solid #a7d7f9;
            padding: 10px 0;
            font-size: 0.85em;
        }

        .content-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 160px 1fr;
            gap: 20px;
        }

        .left-sidebar {
            padding: 20px;
        }

        .main-content {
            background: white;
            padding: 25px;
            border: 1px solid #a7d7f9;
            border-radius: 2px;
        }

        .article-title {
            border-bottom: 1px solid #a2a9b1;
            margin-bottom: 0.5em;
        }

        .infobox {
            float: right;
            margin: 0.5em 0 1em 1em;
            border: 1px solid #a2a9b1;
            padding: 0.2em;
            background-color: #f8f9fa;
            width: 22em;
        }

        .infobox-title {
            text-align: center;
            font-size: 1.25em;
            font-weight: bold;
            background-color: #eaecf0;
            padding: 0.2em;
        }

        .infobox img {
            width: 100%;
            height: auto;
        }

        .toc {
            border: 1px solid #a2a9b1;
            background-color: #f8f9fa;
            padding: 10px;
            display: inline-block;
            margin: 1em 0;
        }

        .reference {
            font-size: 0.8em;
            vertical-align: super;
            color: #0645ad;
        }

        .edit-section {
            font-size: 0.8em;
            margin-left: 1em;
            color: #0645ad;
        }

        blockquote {
            margin: 1em 0;
            padding-left: 1em;
            border-left: 3px solid #c8ccd1;
            color: #54595d;
        }

        .bolt-category {
            color: #ba0000;
            font-weight: bold;
        }

        @keyframes helicopter {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(2160deg);
            }
        }
        
        .bolt-logo img {
            width: 100px;
            height: 100px;
            cursor: pointer;
            transform-origin: center;
        }
        
        .spinning {
            animation: helicopter 1.5s cubic-bezier(0.3, 0, 0.7, 1) forwards;
        }

        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            transform: scale(0.9);
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }

        .back-to-top img {
            width: 40px;
            height: 40px;
            filter: drop-shadow(0 2px 5px rgba(0, 0, 0, 0.2));
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .back-to-top:hover img {
            transform: translateY(-5px) rotate(-10deg);
        }

        .top-bolt-row {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            height: 60px;
            width: 100%;
        }

        .bolt-scroll {
            display: flex;
            gap: 20px;
            justify-content: center;
            width: auto;
            animation: none;
            position: static;
        }

        .top-bolt-row img {
            width: 50px;
            height: 50px;
        }

        .hammered-in {
            transform: translateY(20px);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .pulled-out {
            transform: translateY(0);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .game-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border: 2px solid #333;
            transform: skew(-1deg) rotate(0.5deg);
        }
        
        .game-button:hover {
            transform: translateY(-2px);
        }

        @keyframes scoreFloat {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; transform: translateX(-50%) scale(1.2); }
            100% { opacity: 0; transform: translateX(-50%) scale(1); }
        }

        @keyframes explode {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        .upgrade-item {
            background: white;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .upgrade-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .upgrade-content {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 5px;
        }
        
        .upgrade-name {
            font-weight: bold;
            grid-column: 1;
        }
        
        .upgrade-count {
            grid-column: 2;
            color: #666;
        }
        
        .upgrade-cost {
            grid-column: 1;
            color: #16c784;
        }
        
        .upgrade-bps {
            grid-column: 2;
            color: #666;
        }
        
        .floating-bolt {
            position: absolute;
            pointer-events: none;
            animation: float-up 1s ease-out forwards;
            opacity: 0;
        }
        
        @keyframes float-up {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -150%) scale(1);
                opacity: 0;
            }
        }
        
        .disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        @keyframes boltWiggle {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-5deg) scale(1.1); }
            75% { transform: rotate(5deg) scale(1.1); }
        }
        
        @keyframes boltPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }
        
        @keyframes boltBounce {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.1); }
        }
        
        @keyframes boltShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        #click-area {
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        @media screen and (max-width: 768px) {
            .upgrades-section {
                grid-template-columns: 1fr !important;
                gap: 30px !important;
            }
            
            .upgrades-section > div {
                border: none !important;
                padding: 0 !important;
            }
            
            .upgrades-section > div:first-child {
                border-bottom: 2px dashed #ccc !important;
                padding-bottom: 20px !important;
            }
        }

        .bolt-clicker-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(0,0,0,0.03);
            border-radius: 15px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .stat-box {
            text-align: center;
            padding: 10px 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .upgrade-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .upgrade-item:hover:not(.disabled) {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .upgrade-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }
        
        .upgrade-item:hover::before {
            transform: translateX(100%);
        }
        
        .upgrade-item.disabled {
            opacity: 0.7;
            filter: grayscale(30%);
        }
        
        .upgrade-content {
            padding: 5px;
        }
        
        .upgrade-name {
            font-size: 16px;
            font-weight: 600;
        }
        
        .upgrade-cost {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .upgrade-bps, .upgrade-power {
            font-size: 14px;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="content-wrapper">
            <div></div>
            <div class="top-bolt-row">
                <div class="bolt-scroll">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                    <img src="about-2.png" alt="Bolt" class="bolt">
                </div>
            </div>
        </div>
    </div>

    <div class="content-wrapper">
        <div class="left-sidebar">
            <div class="bolt-logo">
                <img src="about-2.png" alt="Болтопедия Logo">
            </div>
            <div class="wiki-header">BOLTopedia</div>
            <nav class="nav-links">
                <a href="index.html">BOLT</a>
                <a href="introduction.html">КАБАН</a>
                <a href="dedust.html">DeDust</a>
                <a href="ton.html">TON</a>
                <a href="boltgames.html">GAMES</a>
            </nav>
        </div>

        <div class="main-content">
            <div class="article-title">
                <h1>BOLT Games</h1>
            </div>
            
            <div class="hatnote">
                Для лудоманов =)
            </div>

            <div class="toc">
                <h2>Содержание</h2>
                <ol>
                    <li><a href="#zabei-bolt">Забей болт</a></li>
                    <li><a href="#flappy-bolt">Flappy Bolt</a></li>
                    <li><a href="#find-bolt">Найди болт</a></li>
                    <li><a href="#bolt-clicker">Bolt Clicker</a></li>
                        </ol>
            </div>

            <h2 id="zabei-bolt">Забей болт</h2>
            <div class="game-container" style="text-align: center; margin: 40px 0; padding: 20px; background: #f8f9fa; border: 1px solid #a2a9b1; border-radius: 8px;">
                <div id="game-start" style="margin-bottom: 20px;">
                    <button id="start-game" class="game-button" style="padding: 12px 24px; font-size: 18px; font-family: 'JetBrains Mono', monospace; cursor: pointer; background: #fff; border: 2px solid #333; position: relative;">
                        Забить болт
                    </button>
                </div>
               
                <div id="game-area" style="display: none;">
                    <div class="bolt-counter" style="font-size: 24px; margin-bottom: 20px;">
                        Болт забит: <span id="click-bolt-count">0</span> раз
            </div>
                 <!-- place a spacer here -->
                 <div style="height: 33px;"></div>
                    <div class="game-bolt-row" style="display: flex; justify-content: center; align-items: center; position: relative; height: 100px;">
                        <div style="position: relative; width: 200px; height: 100px;">
                            
                            <div class="game-bolt" style="cursor: pointer; position: absolute; top: 0%; left: 50%; transform: translate(-50%, -50%);">
                               
                                <img src="about-2.png" alt="Game Bolt" 
                                style="width: 80px; height: 80px; position: relative; z-index: 1;">
            </div>
                            <img src="majestic-tree-stump-natures-timeless-beauty.png" alt="Tree Stump" 
                                style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 17.5px; left: 0;">
        </div>
    </div>
        </div>
    </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const startButton = document.getElementById('start-game');
                    const gameArea = document.getElementById('game-area');
                    const gameBolt = document.querySelector('.game-bolt img');
                    const boltCounter = document.getElementById('click-bolt-count');
                    let count = 0;

                    startButton.addEventListener('click', function() {
                        startButton.parentElement.style.display = 'none';
                        gameArea.style.display = 'block';
                    });

                    gameBolt.addEventListener('click', function() {
                        if (!this.classList.contains('hammered-in')) {
                            // Hammer down
                            this.classList.remove('pulled-out');
                            this.style.animation = 'hammerIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards';
                            count++;
                            boltCounter.textContent = count;

                            // Add shake effect
                            const gameContainer = document.querySelector('.game-bolt-row');
                            gameContainer.style.transform = 'translateX(1px)';
                            setTimeout(() => {
                                gameContainer.style.transform = 'translateX(-1px)';
                                setTimeout(() => {
                                    gameContainer.style.transform = 'translateX(0)';
                                }, 50);
                            }, 50);
                        } else {
                            // Pull up with the complex animation
                            this.style.animation = 'pullOut 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) forwards';
                        }
                        this.classList.toggle('hammered-in');
                    });
                });
            </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const bolt = document.querySelector('.bolt-logo img');
            
            // Initial animation on page load
            bolt.classList.add('spinning');
            
            // Click handler
            bolt.addEventListener('click', () => {
                if (!bolt.classList.contains('spinning')) {
                    bolt.classList.add('spinning');
                    
                    bolt.addEventListener('animationend', function handler() {
                        bolt.classList.remove('spinning');
                        bolt.removeEventListener('animationend', handler);
                    });
                }
            });
            
            // Remove initial animation class after it completes
            bolt.addEventListener('animationend', function handler() {
                bolt.classList.remove('spinning');
                bolt.removeEventListener('animationend', handler);
            });
        });

        // Back to top functionality
        const backToTop = document.querySelector('.back-to-top');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });
        
        backToTop.addEventListener('click', (e) => {
            e.preventDefault();
            const scrollDuration = 500; // Faster duration (500ms instead of 800ms)
            const scrollStep = -window.scrollY / (scrollDuration / 15);
            
            const scrollInterval = setInterval(() => {
                if (window.scrollY !== 0) {
                    window.scrollBy(0, scrollStep);
                } else {
                    clearInterval(scrollInterval);
                }
            }, 15);
        });

        // Updated smooth scroll functionality
        document.querySelectorAll('.toc a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    const headerOffset = 70; // Height of sticky header
                    const elementPosition = window.pageYOffset + targetElement.getBoundingClientRect().top - headerOffset;
                    const scrollDuration = 500;
                    const scrollStep = (elementPosition - window.pageYOffset) / (scrollDuration / 15);
                    
                    const scrollInterval = setInterval(() => {
                        if (Math.abs(elementPosition - window.pageYOffset) > Math.abs(scrollStep)) {
                            window.scrollBy(0, scrollStep);
                        } else {
                            window.scrollTo(0, elementPosition);
                            clearInterval(scrollInterval);
                        }
                    }, 15);
                }
            });
        });
    </script>
    <script>
       document.addEventListener('DOMContentLoaded', function() {
    const bolts = document.querySelectorAll('.bolt-scroll img');
    
    // Initial state - all bolts at top
    bolts.forEach(bolt => {
        bolt.style.transform = 'translateY(0)';
    });

    // Click handler for each bolt
    bolts.forEach(bolt => {
        bolt.addEventListener('click', function() {
            if (!this.classList.contains('hammered-in')) {
                // Hammer down
                this.classList.remove('pulled-out');
                this.classList.add('hammered-in');
                
                // Add shake effect to simulate impact
                setTimeout(() => {
                    const row = document.querySelector('.top-bolt-row');
                    row.style.transform = 'translateX(1px)';
                    setTimeout(() => {
                        row.style.transform = 'translateX(-1px)';
                        setTimeout(() => {
                            row.style.transform = 'translateX(0)';
                        }, 50);
                    }, 50);
                }, 300);
            } else {
                // Pull up
                this.classList.remove('hammered-in');
                this.classList.add('pulled-out');
            }
        });
    });
});
</script>

            <h2 id="flappy-bolt">Flappy Bolt</h2>
            <div class="game-container" style="text-align: center; margin: 40px 0; padding: 20px; background: #f8f9fa; border: 1px solid #a2a9b1; border-radius: 8px;">
                <div id="flappy-start" style="margin-bottom: 20px;">
                    <button id="start-flappy" class="game-button" style="padding: 12px 24px; font-size: 18px; font-family: 'JetBrains Mono', monospace; cursor: pointer; background: #fff; border: 2px solid #333; position: relative;">
                        Попрыгать
                    </button>
                </div>
                
                <div id="flappy-game" style="display: none;">
                    <div class="score-counter" style="font-size: 24px; margin-bottom: 20px;">
                        <div style="margin-bottom: 8px;">Счёт: <span id="flappy-score">0</span></div>
                        <div style="font-size: 18px; color: #666;">Лучший результат: <span id="best-score">0</span></div>
                    </div>
                    <div style="position: relative; width: 100%; max-width: 640px; margin: 0 auto;">
                        <canvas id="gameCanvas" width="640" height="480" style="border: 2px solid #333; background: #f0f0f0; max-width: 100%; height: auto;"></canvas>
                        <div id="start-prompt" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                            font-size: 24px; color: #333; background: rgba(255,255,255,0.95); padding: 20px; border-radius: 8px;
                            z-index: 100; text-align: center; width: 80%; max-width: 300px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                            Нажмите что угодно, чтобы начать
                        </div>
                    </div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const canvas = document.getElementById('gameCanvas');
                    const ctx = canvas.getContext('2d');
                    const startButton = document.getElementById('start-flappy');
                    const gameArea = document.getElementById('flappy-game');
                    const scoreElement = document.getElementById('flappy-score');
                    const startPrompt = document.getElementById('start-prompt');
                    
                    // Add best score tracking
                    let bestScore = 0;  // Reset best score on page reload
                    const bestScoreElement = document.getElementById('best-score');
                    
                    let boltImg = new Image();
                    boltImg.src = 'about-2.png';
                    
                    let score = 0;
                    let combo = 0;
                    let comboTimer;
                    let boltY = canvas.height / 2;
                    let boltVelocity = 0;
                    let gravity = 0.5;
                    let jumpStrength = -7;
                    let gameStarted = false;
                    let pipes = [];
                    let gameLoop;
                    let isGameOver = false;
                    let boltRotation = 0;
                    let gameSpeed = 2;
                    let speedIncreaseInterval;

                    const bolt = {
                        x: 50,
                        width: 60,
                        height: 60,
                        rotation: 0,
                        targetRotation: 0
                    };

                    function updateBoltRotation() {
                        // Smooth rotation animation
                        bolt.targetRotation = Math.min(Math.PI/3, Math.max(-Math.PI/6, boltVelocity * 0.15));
                        bolt.rotation += (bolt.targetRotation - bolt.rotation) * 0.1;
                    }

                    function drawBolt() {
                        ctx.save();
                        ctx.translate(bolt.x + bolt.width/2, boltY + bolt.height/2);
                        ctx.rotate(bolt.rotation);
                        // Add subtle hovering animation
                        const hoverOffset = Math.sin(Date.now() * 0.003) * 2;
                        ctx.translate(0, hoverOffset);
                        ctx.drawImage(boltImg, -bolt.width/2, -bolt.height/2, bolt.width, bolt.height);
                        ctx.restore();
                    }

                    function drawPipes() {
                        pipes.forEach(pipe => {
                            // Ensure color is set before drawing
                            ctx.fillStyle = pipe.color || '#2ecc71';
                            // Draw top pipe
                            ctx.fillRect(pipe.x, 0, pipe.width, pipe.topHeight);
                            // Draw bottom pipe with same color
                            ctx.fillRect(pipe.x, pipe.topHeight + pipe.gap, pipe.width, 
                                canvas.height - (pipe.topHeight + pipe.gap));
                        });
                    }

                    function updateGame() {
                        if (isGameOver) return;

                        boltVelocity += gravity;
                        boltY += boltVelocity;
                        updateBoltRotation();

                        // Move pipes
                        pipes.forEach(pipe => {
                            pipe.x -= gameSpeed;
                            // Score when bolt passes middle of pipe
                            if (!pipe.passed && pipe.x + pipe.width/2 < bolt.x) {
                                pipe.passed = true;
                                combo++;
                                const comboPoints = Math.floor(combo/5);  // Extra point every 5 consecutive pipes
                                score += (1 + comboPoints);
                                scoreElement.textContent = score;
                                
                                // Visual score popup
                                const scorePopup = document.createElement('div');
                                scorePopup.textContent = comboPoints > 0 ? `+${1 + comboPoints}` : '+1';
                                scorePopup.style.cssText = `
                                    position: absolute;
                                    left: ${canvas.offsetLeft + bolt.x + 30}px;
                                    top: ${canvas.offsetTop + boltY}px;
                                    color: ${comboPoints > 0 ? '#ff9900' : '#16c784'};
                                    font-size: 24px;
                                    font-weight: bold;
                                    pointer-events: none;
                                    animation: scoreFloat 1s ease-out forwards;
                                    z-index: 1000;
                                `;
                                gameArea.appendChild(scorePopup);
                                setTimeout(() => scorePopup.remove(), 1000);

                                // Reset combo timer
                                clearTimeout(comboTimer);
                                comboTimer = setTimeout(() => combo = 0, 2000);

                                // Show combo text if applicable
                                if (combo >= 5) {
                                    const comboText = document.createElement('div');
                                    comboText.textContent = `КОМБО x${combo}!`;
                                    comboText.style.cssText = `
                                        position: absolute;
                                        left: 50%;
                                        top: ${canvas.offsetTop + 20}px;
                                        transform: translateX(-50%);
                                        color: #ff9900;
                                        font-size: 28px;
                                        font-weight: bold;
                                        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                                        pointer-events: none;
                                        animation: fadeOut 1s forwards;
                                        z-index: 1000;
                                    `;
                                    gameArea.appendChild(comboText);
                                    setTimeout(() => comboText.remove(), 1000);
                                }
                            }
                        });

                        // Remove off-screen pipes
                        if (pipes.length && pipes[0].x < -pipes[0].width) {
                            pipes.shift();
                        }

                        // Add new pipes
                        if (!pipes.length || pipes[pipes.length - 1].x < canvas.width - 250) {
                            const newPipe = createPipe();
                            newPipe.passed = false;  // Add passed flag
                            pipes.push(newPipe);
                        }

                        // Check collisions
                        if (boltY < 0 || boltY + bolt.height > canvas.height) {
                            gameOver();
                        }

                        pipes.forEach(pipe => {
                            if (bolt.x + bolt.width > pipe.x && bolt.x < pipe.x + pipe.width) {
                                if (boltY < pipe.topHeight || boltY + bolt.height > pipe.topHeight + pipe.gap) {
                                    gameOver();
                                }
                            }
                        });

                        // Draw everything
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        drawPipes();
                        drawBolt();
                    }

                    function gameOver() {
                        isGameOver = true;
                        gameStarted = false;
                        clearInterval(gameLoop);
                        // Screen shake effect
                        canvas.style.animation = 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both';
                        setTimeout(() => canvas.style.animation = '', 500);
                        // Update best score
                        if (score > bestScore) {
                            bestScore = score;
                            localStorage.setItem('flappyBoltBestScore', bestScore);
                            bestScoreElement.textContent = bestScore;
                        }
                        startButton.style.display = 'block';
                        startButton.textContent = 'Играть снова';
                        startPrompt.style.display = 'block';
                        startPrompt.style.position = 'absolute';
                        startPrompt.style.zIndex = '100';
                        startPrompt.innerHTML = 'Не повезло! Попробуй еще.';
                    }

                    function startGame() {
                        if (!gameStarted) {
                            gameStarted = true;
                            gameSpeed = 2;
                            startPrompt.style.display = 'none';
                            startPrompt.innerHTML = 'Нажмите что угодно, чтобы начать';
                            isGameOver = false;
                            boltY = canvas.height / 2;
                            boltVelocity = 0;
                            bolt.rotation = 0;
                            bolt.targetRotation = 0;
                            pipes = [];
                            score = 0;
                            combo = 0;
                            comboTimer = null;
                            scoreElement.textContent = score;
                            startButton.style.display = 'none';
                            gameArea.style.display = 'block';
                            
                            if (gameLoop) clearInterval(gameLoop);
                            gameLoop = setInterval(updateGame, 1000/60);
                            // Increase speed every 10 seconds
                            speedIncreaseInterval = setInterval(() => {
                                if (gameSpeed < 4) {  // Max speed cap
                                    gameSpeed += 0.2;
                                }
                            }, 10000);
                        }
                    }

                    function createPipe() {
                        const gap = 160;
                        const minHeight = 50;
                        const maxHeight = canvas.height - gap - minHeight;
                        const height = Math.random() * (maxHeight - minHeight) + minHeight;
                        
                        // Get previous pipe height for comparison
                        const gapCenter = height + (gap / 2);
                        const previousGapCenter = pipes.length > 0 ? 
                            pipes[pipes.length - 1].topHeight + (gap / 2) : gapCenter;
                        
                        // Compare gap positions - positive means gap is higher (like price going up)
                        const heightDifference = gapCenter - previousGapCenter;
                        
                        // Determine color based on height difference
                        let color;
                        if (heightDifference > 20) {  // Gap is higher - like price going up
                            color = '#ea3943'; // Red for upward movement
                        } else if (heightDifference < -20) {  // Gap is lower - like price going down
                            color = '#16c784'; // Pump (green)
                        } else {
                            color = '#2ecc71'; // Neutral (default green)
                        }
                        
                        return {
                            x: canvas.width,
                            width: 70,
                            topHeight: height,
                            gap: gap,
                            color: color
                        };
                    }

                    startButton.addEventListener('click', function() {
                        gameArea.style.display = 'block';
                        startPrompt.style.display = 'block';
                        this.style.display = 'none';
                        // Initialize game view without starting
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        drawBolt();
                    });

                    canvas.addEventListener('click', function() {
                        if (!gameStarted) {
                            startGame();
                        } else if (!isGameOver) {
                            boltVelocity = jumpStrength;
                        }
                    });

                    // Add keyboard controls
                    document.addEventListener('keydown', function(e) {
                        if (!gameStarted) {
                            startGame();
                        } else if (!isGameOver) {
                            boltVelocity = jumpStrength;
                        }
                    });
                });
            </script>

            <h2 id="find-bolt">Найди болт</h2>
            <div class="game-container" style="text-align: center; margin: 40px 0; padding: 20px; background: #f8f9fa; border: 1px solid #a2a9b1; border-radius: 8px;">
                <div id="find-bolt-start" style="margin-bottom: 20px;">
                    <button id="start-find-bolt" class="game-button" style="padding: 12px 24px; font-size: 18px; font-family: 'JetBrains Mono', monospace; cursor: pointer; background: #fff; border: 2px solid #333; position: relative;">
                        Начать поиск
                    </button>
                </div>
                
                <div id="find-bolt-game" style="display: none;">
                    <div class="game-stats" style="font-size: 20px; margin-bottom: 20px; color: #666;">
                        <div>Попыток: <span id="attempts">0</span></div>
                        <div>Всего найдено: <span id="total-bolts">0</span> болтов</div>
                    </div>
                    
                    <div id="find-bolt-grid" style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 8px; max-width: 500px; margin: 0 auto;">
                    </div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const startButton = document.getElementById('start-find-bolt');
                    const gameArea = document.getElementById('find-bolt-game');
                    const gridContainer = document.getElementById('find-bolt-grid');
                    const attemptsDisplay = document.getElementById('attempts');
                    const totalBoltsDisplay = document.getElementById('total-bolts');
                    
                    let attempts = 0;
                    let totalBoltsFound = 0;
                    let boltPositions = [];
                    let foundBolts = 0;
                    let gridSize = 48;
                    let isGameActive = false;

                    function createCell() {
                        const cell = document.createElement('div');
                        cell.style.cssText = `
                            aspect-ratio: 1;
                            background: #fff;
                            border: 2px solid #333;
                            cursor: pointer;
                            transition: all 0.2s ease;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            position: relative;
                            overflow: hidden;
                            font-size: 14px;
                            color: #999;
                        `;
                        return cell;
                    }

                    function getDirectionalHint(index) {
                        const row = Math.floor(index / 8);
                        const col = index % 8;
                        let nearestBolt = null;
                        let minDistance = Infinity;
                        
                        boltPositions.forEach(pos => {
                            const boltRow = Math.floor(pos / 8);
                            const boltCol = pos % 8;
                            const distance = Math.abs(row - boltRow) + Math.abs(col - boltCol);
                            if (distance < minDistance) {
                                minDistance = distance;
                                nearestBolt = { row: boltRow, col: boltCol };
                            }
                        });

                        // Return a color based on distance
                        if (minDistance <= 1) return null;
                        const maxDistance = Math.sqrt(Math.pow(8, 2) + Math.pow(6, 2)); // Max possible distance
                        const intensity = 1 - (minDistance / maxDistance);
                        return `rgba(${Math.round(255 * (1 - intensity))}, 0, ${Math.round(255 * intensity)}, 0.3)`;
                    }

                    function createExplosion(cell) {
                        const explosion = document.createElement('div');
                        explosion.style.cssText = `
                            position: absolute;
                            width: 100%;
                            height: 100%;
                            animation: explode 0.5s cubic-bezier(.36,.07,.19,.97) both;
                            background: radial-gradient(circle at center, 
                                rgba(255,68,68,0.9) 0%,
                                rgba(255,68,68,0.6) 30%,
                                transparent 70%
                            );
                            pointer-events: none;
                            top: 0;
                            left: 0;
                            z-index: 10;
                        `;
                        cell.appendChild(explosion);
                        explosion.addEventListener('animationend', () => explosion.remove());
                    }

                    function createGrid() {
                        gridContainer.innerHTML = '';
                        boltPositions = [];
                        foundBolts = 0;
                        
                        // Place 3 bolts randomly
                        while (boltPositions.length < 3) {
                            const pos = Math.floor(Math.random() * gridSize);
                            if (!boltPositions.includes(pos)) {
                                boltPositions.push(pos);
                            }
                        }
                        
                        // Update or create counter
                        let counterDisplay = document.getElementById('bolt-counter');
                        if (!counterDisplay) {
                            counterDisplay = document.createElement('div');
                            counterDisplay.id = 'bolt-counter';
                            counterDisplay.style.fontSize = '20px';
                            counterDisplay.style.marginBottom = '15px';
                            gridContainer.parentElement.insertBefore(counterDisplay, gridContainer);
                        }
                        counterDisplay.textContent = `Найдено: ${foundBolts} из 3 болтов`;
                        
                        gridContainer.style.gridTemplateColumns = 'repeat(8, 1fr)';
                        
                        for (let i = 0; i < gridSize; i++) {
                            const cell = createCell();
                            
                            cell.addEventListener('click', () => checkCell(cell, i));
                            cell.addEventListener('mouseover', () => {
                                if (!cell.classList.contains('revealed')) {
                                    cell.style.transform = 'scale(1.05)';
                                    cell.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                                }
                            });
                            cell.addEventListener('mouseout', () => {
                                cell.style.transform = 'scale(1)';
                                cell.style.boxShadow = 'none';
                            });
                            
                            gridContainer.appendChild(cell);
                        }
                    }

                    function checkCell(cell, index) {
                        if (!isGameActive || cell.classList.contains('revealed')) return;
                        
                        cell.classList.add('revealed');
                        attempts++;
                        attemptsDisplay.textContent = attempts;
                        
                        if (boltPositions.includes(index)) {
                            // Found a bolt!
                            const boltImg = document.createElement('img');
                            boltImg.src = 'about-2.png';
                            boltImg.style.width = '80%';
                            boltImg.style.height = '80%';
                            cell.appendChild(boltImg);
                            cell.style.background = '#16c784';
                            
                            foundBolts++;
                            totalBoltsFound++;
                            totalBoltsDisplay.textContent = totalBoltsFound;
                            document.getElementById('bolt-counter').textContent = 
                                `Найдено: ${foundBolts} из 3 болтов`;
                            
                            if (foundBolts === 3) {
                                // Show completion message
                                const message = document.createElement('div');
                                message.textContent = `Отлично! Все болты найдены за ${attempts} попыток`;
                                message.style.cssText = `
                                    position: absolute;
                                    top: 50%;
                                    left: 50%;
                                    transform: translate(-50%, -50%);
                                    background: rgba(255,255,255,0.9);
                                    padding: 20px;
                                    border-radius: 8px;
                                    font-size: 20px;
                                    color: #16c784;
                                    z-index: 100;
                                `;
                                gridContainer.appendChild(message);
                                setTimeout(() => {
                                    message.remove();
                                    if (isGameActive) createGrid();
                                }, 1000);
                            }
                        } else {
                            // Wrong choice
                            cell.style.background = '#ea3943';
                            createExplosion(cell);
                            
                            // Apply color hint
                            const hintColor = getDirectionalHint(index);
                            if (hintColor) {
                                cell.style.backgroundColor = hintColor;
                            }
                        }
                    }

                    function revealAll() {
                        const cells = gridContainer.children;
                        for (let i = 0; i < cells.length; i++) {
                            if (boltPositions.includes(i)) {
                                const boltImg = document.createElement('img');
                                boltImg.src = 'about-2.png';
                                boltImg.style.width = '80%';
                                boltImg.style.height = '80%';
                                cells[i].appendChild(boltImg);
                                cells[i].style.background = '#16c784';
                            }
                            cells[i].classList.add('revealed');
                        }
                    }

                    startButton.addEventListener('click', function() {
                        attempts = 0;
                        attemptsDisplay.textContent = attempts;
                        isGameActive = true;
                        this.style.display = 'none';
                        gameArea.style.display = 'block';
                        createGrid();
                    });
                });
            </script>

            <h2 id="bolt-clicker">Bolt Clicker</h2>
            <div class="game-container" style="text-align: center; margin: 40px 0; padding: 20px; background: #f8f9fa; border: 1px solid #a2a9b1; border-radius: 8px;">
                <!-- Make entire container clickable -->
                <div id="click-area" style="position: relative; min-height: 500px;">
                    <div class="bolt-clicker-stats" style="display: flex; justify-content: center; gap: 30px; margin-bottom: 30px; padding: 15px; background: rgba(0,0,0,0.03); border-radius: 15px; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);">
                        <div class="stat-box" style="text-align: center; padding: 10px 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="font-size: 16px; color: #666; margin-bottom: 5px;">Болтов</div>
                            <div style="font-size: 28px; font-weight: 600; color: #333;"><span id="clicker-bolt-count">0</span></div>
                        </div>
                        <div class="stat-box" style="text-align: center; padding: 10px 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="font-size: 16px; color: #666; margin-bottom: 5px;">В секунду</div>
                            <div style="font-size: 28px; font-weight: 600; color: #16c784;"><span id="bolts-per-second">0.0</span></div>
                            <div style="font-size: 14px; color: #999;">+<span id="passive-bonus">0.0</span> бонус</div>
                        </div>
                        <div class="stat-box" style="text-align: center; padding: 10px 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="font-size: 16px; color: #666; margin-bottom: 5px;">За клик</div>
                            <div style="font-size: 28px; font-weight: 600; color: #0645ad;"><span id="bolts-per-click">1</span></div>
                            <div style="font-size: 14px; color: #999;">+<span id="click-bonus">0.0</span> бонус</div>
                        </div>
                    </div>
                    
                    <div class="main-bolt-area" style="position: relative; width: 200px; height: 200px; margin: 0 auto; cursor: pointer;">
                        <img src="about-2.png" alt="Bolt" id="main-bolt" style="width: 100%; height: 100%; transition: transform 0.1s;">
                    </div>
                    
                    <div class="upgrades-section" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                        <!-- Passive Upgrades Column -->
                        <div style="border-right: 2px dashed #ccc; padding-right: 20px;">
                            <h3 style="text-align: left; margin-bottom: 15px; color: #666;">Пассивка</h3>
                            <div class="upgrades-container" style="display: grid; gap: 10px;">
                                <div class="upgrade-item" data-id="vitalik" data-cost="10" data-bps="0.2" 
                                    style="background: linear-gradient(135deg, #fff 0%, #f0f8ff 100%); border: 2px solid #0645ad;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name" style="color: #0645ad;">Попросить Виталика о фаере</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">10 болтов</span>
                                        <span class="upgrade-bps">+0.2 болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="nick" data-cost="50" data-bps="1" 
                                    style="background: linear-gradient(135deg, #fff 0%, #f0fff0 100%); border: 2px solid #16c784;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name" style="color: #16c784;">Запрячь котлету</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">50 болтов</span>
                                        <span class="upgrade-bps">+1 болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="kaban" data-cost="250" data-bps="5" 
                                    style="background: linear-gradient(135deg, #fff 0%, #fff0f0 100%); border: 2px solid #ea3943;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Запрячь Кабана</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">250 болтов</span>
                                        <span class="upgrade-bps">+5 болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="tf" data-cost="1000" data-bps="25" 
                                    style="background: linear-gradient(135deg, #fff 0%, #fff8f0 100%); border: 2px solid #f7931a;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Запрячь кибу</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">1K болтов</span>
                                        <span class="upgrade-bps">+25 болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="durov" data-cost="5000" data-bps="100" 
                                    style="background: linear-gradient(135deg, #fff 0%, #f0f0ff 100%); border: 2px solid #0088cc;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Запрячь тестера</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">5K болтов</span>
                                        <span class="upgrade-bps">+100 болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="tester" data-cost="25000" data-bps="400" 
                                    style="background: linear-gradient(135deg, #fff 0%, #f5f0ff 100%); border: 2px solid #9b59b6;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Запрячь Ника из ДеДаст</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">25K болтов</span>
                                        <span class="upgrade-bps">+400 болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="kiba" data-cost="100000" data-bps="1600" 
                                    style="background: linear-gradient(135deg, #fff 0%, #fff0e6 100%); border: 2px solid #e67e22;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Запрячь ТФ</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">100K болтов</span>
                                        <span class="upgrade-bps">+1.6K болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="kotleta" data-cost="500000" data-bps="6400" 
                                    style="background: linear-gradient(135deg, #fff 0%, #fff5e6 100%); border: 2px solid #d35400;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Запрячь Дурова</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">500K болтов</span>
                                        <span class="upgrade-bps">+6.4K болт/сек</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="ton" data-cost="2000000" data-bps="25600" 
                                    style="background: linear-gradient(135deg, #000 0%, #333 100%); border: 2px solid #fff;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name" style="color: #fff; text-shadow: 0 0 5px #fff;">Закрыть ТОН</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">2M болтов</span>
                                        <span class="upgrade-bps" style="color: #fff;">+25.6K болт/сек</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Click Power Upgrades Column -->
                        <div style="padding-left: 20px;">
                            <h3 style="text-align: left; margin-bottom: 15px; color: #666;">Болт/Клик</h3>
                            <div class="upgrades-container" style="display: grid; gap: 10px;">
                                <div class="upgrade-item" data-id="wrench" data-cost="30" data-power="1" 
                                    style="background: linear-gradient(135deg, #fff 0%, #e6e6e6 100%); border: 2px solid #555;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Болтовчанин</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">30 болтов</span>
                                        <span class="upgrade-power">+1 болт/клик</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="hammer" data-cost="150" data-power="5" 
                                    style="background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%); border: 2px solid #444;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Холдер</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">150 болтов</span>
                                        <span class="upgrade-power">+5 болт/клик</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="drill" data-cost="750" data-power="25" 
                                    style="background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%); border: 2px solid #333;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Энтузиаст</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">750 болтов</span>
                                        <span class="upgrade-power">+25 болт/клик</span>
                                    </div>
                                </div>
                                <div class="upgrade-item" data-id="boltgun" data-cost="3000" data-power="125" 
                                    style="background: linear-gradient(135deg, #fff 0%, #fafafa 100%); border: 2px solid #222;">
                                    <div class="upgrade-content">
                                        <span class="upgrade-name">Болтоши</span>
                                        <span class="upgrade-count">0</span>
                                        <span class="upgrade-cost">3K болтов</span>
                                        <span class="upgrade-power">+125 болт/клик</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const clickArea = document.getElementById('click-area');
                    const mainBolt = document.getElementById('main-bolt');
                    const boltCount = document.getElementById('clicker-bolt-count');
                    const bpsDisplay = document.getElementById('bolts-per-second');
                    const upgradeItems = document.querySelectorAll('.upgrade-item');
                    
                    let bolts = 0;
                    let bps = 0;
                    let clickPower = 1;
                    
                    let upgrades = {
                        // Passive upgrades
                        vitalik: { count: 0, bps: 0.2, baseCost: 15, unlocked: true },
                        nick: { count: 0, bps: 1, baseCost: 100, unlocked: false },
                        kaban: { count: 0, bps: 5, baseCost: 500, unlocked: false },
                        tf: { count: 0, bps: 25, baseCost: 3000, unlocked: false },
                        durov: { count: 0, bps: 100, baseCost: 15000, unlocked: false },
                        tester: { count: 0, bps: 400, baseCost: 75000, unlocked: false },
                        kiba: { count: 0, bps: 1600, baseCost: 300000, unlocked: false },
                        kotleta: { count: 0, bps: 6400, baseCost: 1200000, unlocked: false },
                        ton: { count: 0, bps: 25600, baseCost: 5000000, unlocked: false },

                        // Click power upgrades
                        wrench: { count: 0, power: 1, baseCost: 30, unlocked: true, type: 'click' },
                        hammer: { count: 0, power: 5, baseCost: 250, unlocked: false, type: 'click' },
                        drill: { count: 0, power: 25, baseCost: 2000, unlocked: false, type: 'click' },
                        boltgun: { count: 0, power: 125, baseCost: 16000, unlocked: false, type: 'click' }
                    };
                    
                    function formatNumber(num) {
                        if (num >= 1000000) return (num/1000000).toFixed(1) + 'M';
                        if (num >= 1000) return (num/1000).toFixed(1) + 'K';
                        return num.toFixed(0);
                    }
                    
                    function createFloatingBolt(x, y, container) {
                        const bolt = document.createElement('img');
                        bolt.src = 'about-2.png';
                        // Get container boundaries
                        const containerRect = container.getBoundingClientRect();
                        const padding = 40; // Padding from edges
                        
                        // Random position within container bounds
                        const randomX = Math.random() * (containerRect.width - 2 * padding) + padding;
                        const randomY = Math.random() * (containerRect.height / 2) + padding; // Use upper half for bolts
                        
                        bolt.style.cssText = `
                            position: absolute;
                            left: ${randomX}px;
                            top: ${randomY}px;
                            width: 40px;
                            height: 40px;
                            pointer-events: none;
                            user-select: none;
                            -webkit-user-select: none;
                            user-drag: none;
                            -webkit-user-drag: none;
                            z-index: 100;
                            transform: rotate(${Math.random() * 360}deg);
                        `;
                        bolt.classList.add('floating-bolt');
                        container.appendChild(bolt);
                        setTimeout(() => bolt.remove(), 1000);
                    }
                    
                    function applyRandomAnimation(element) {
                        const animations = ['boltWiggle', 'boltPulse', 'boltBounce', 'boltShake'];
                        const randomAnim = animations[Math.floor(Math.random() * animations.length)];
                        element.style.animation = `${randomAnim} 0.3s ease-out`;
                        element.addEventListener('animationend', () => {
                            element.style.animation = '';
                        }, { once: true });
                    }
                    
                    function calculateClickPower() {
                        let base = clickPower;
                        let bonus = 0;
                        Object.values(upgrades).forEach(upgrade => {
                            if (upgrade.type === 'click' && upgrade.count > 0) {
                                bonus += upgrade.power * upgrade.count * 0.05;
                            }
                        });
                        document.getElementById('click-bonus').textContent = formatNumber(bonus);
                        return base + bonus;
                    }

                    function calculateBPS() {
                        let base = bps;
                        let bonus = 0;
                        Object.values(upgrades).forEach(upgrade => {
                            if (!upgrade.type && upgrade.count > 0) {
                                bonus += upgrade.bps * upgrade.count * 0.02;
                            }
                        });
                        document.getElementById('passive-bonus').textContent = formatNumber(bonus);
                        return base + bonus;
                    }

                    clickArea.addEventListener('click', function(e) {
                        // Prevent click event from bubbling up to clickArea
                        e.stopPropagation();
                        
                        bolts += calculateClickPower();
                        boltCount.textContent = formatNumber(bolts);
                        
                        // Apply random animation to main bolt
                        applyRandomAnimation(mainBolt);
                        
                        // Create multiple floating bolts
                        const numBolts = Math.min(3 + Math.floor(calculateClickPower() / 50), 8);
                        for (let i = 0; i < numBolts; i++) {
                            setTimeout(() => {
                                createFloatingBolt(e.clientX, e.clientY, clickArea);
                            }, i * 50);
                        }
                        
                        updateUpgrades();
                    });
                    
                    function getUpgradeCost(basePrice, count) {
                        return Math.floor(basePrice * Math.pow(1.15, count));
                    }
                    
                    function updateUpgrades() {
                        upgradeItems.forEach(item => {
                            const id = item.dataset.id;
                            const upgrade = upgrades[id];
                            
                            if (!upgrade.unlocked) {
                                item.style.display = 'none';
                                return;
                            } else {
                                item.style.display = 'block';
                            }

                            const cost = getUpgradeCost(upgrade.baseCost, upgrade.count);
                            item.querySelector('.upgrade-count').textContent = upgrade.count;
                            item.querySelector('.upgrade-cost').textContent = formatNumber(cost) + ' болтов';
                            
                            if (bolts < cost) {
                                item.classList.add('disabled');
                            } else {
                                item.classList.remove('disabled');
                            }
                        });

                        document.getElementById('bolts-per-click').textContent = formatNumber(calculateClickPower());
                    }
                    
                    function checkUnlocks() {
                        // Passive upgrades unlocking
                        if (upgrades.vitalik.count > 0) upgrades.nick.unlocked = true;
                        if (upgrades.nick.count > 0) upgrades.kaban.unlocked = true;
                        if (upgrades.kaban.count > 0) upgrades.tf.unlocked = true;
                        if (upgrades.tf.count > 0) upgrades.durov.unlocked = true;
                        if (upgrades.durov.count > 0) upgrades.tester.unlocked = true;
                        if (upgrades.tester.count > 0) upgrades.kiba.unlocked = true;
                        if (upgrades.kiba.count > 0) upgrades.kotleta.unlocked = true;
                        if (upgrades.kotleta.count > 0) upgrades.ton.unlocked = true;
                        
                        // Click power upgrades unlocking
                        if (upgrades.wrench.count > 0) upgrades.hammer.unlocked = true;
                        if (upgrades.hammer.count > 0) upgrades.drill.unlocked = true;
                        if (upgrades.drill.count > 0) upgrades.boltgun.unlocked = true;
                    }

                    upgradeItems.forEach(item => {
                        item.addEventListener('click', function(e) {
                            // Prevent click event from bubbling up to clickArea
                            e.stopPropagation();
                            
                            const id = this.dataset.id;
                            const upgrade = upgrades[id];
                            const cost = getUpgradeCost(upgrade.baseCost, upgrade.count);
                            
                            if (bolts >= cost) {
                                bolts -= cost;
                                upgrade.count++;
                                if (upgrade.type === 'click') {
                                    clickPower += upgrade.power;
                                } else {
                                    bps += upgrade.bps;
                                }
                                
                                boltCount.textContent = formatNumber(bolts);
                                bpsDisplay.textContent = formatNumber(calculateBPS());
                                
                                // Purchase animation
                                this.style.transform = 'scale(1.05)';
                                setTimeout(() => this.style.transform = '', 100);
                                
                                checkUnlocks();
                                updateUpgrades();
                            }
                        });
                    });
                    
                    // Passive income
                    setInterval(() => {
                        bolts += calculateBPS() / 10;
                        boltCount.textContent = formatNumber(bolts);
                        bpsDisplay.textContent = formatNumber(calculateBPS());
                        document.getElementById('bolts-per-click').textContent = formatNumber(calculateClickPower());
                        updateUpgrades();
                    }, 100);
                });
            </script>
        </div>
    </div>
</body>
</html> 